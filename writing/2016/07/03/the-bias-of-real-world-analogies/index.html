<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />

  <!-- Meta information -->
  <title>
    The bias of real-world analogies
  </title>
  <link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml" />

  <!-- CSS -->
  <link rel="stylesheet" href="/css/style.css" />
  <link
    rel="preload"
    href="/css/et-book/et-book-roman-line-figures/et-book-roman-line-figures.woff"
    as="font"
  />
  <link
    rel="preload"
    href="/css/et-book/et-book-bold-line-figures/et-book-bold-line-figures.woff"
    as="font"
  />
  <link
    rel="preload"
    href="/css/et-book/et-book-display-italic-old-style-figures/et-book-display-italic-old-style-figures.woff"
    as="font"
  />

  <!-- <link rel="canonical" href="https://soreine.dev/writing/2016/07/03/the-bias-of-real-world-analogies/">
  <link rel="alternate" type="application/rss+xml" title="Soreine" href="https://soreine.dev/feed.xml" />
  -->

  <!-- OG attributes -->
  <meta
    name="description"
    content="  Recently, I had to implement some functions to move items in an ordered collection, and I made it way more complicated than needed. My collections were ord..."
  />

  <meta property="og:title" content="Soreine" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://soreine.dev/" />
  <meta property="og:description" content="Soreine's personal website" />
</head>

  <!-- https://instant.page/ -->
  <script src="/scripts/instantpage-3.0.0.js" type="module" defer></script>
  <body>
    <article class="writing">
      <!-- https://github.com/git-no/jekyll-breadcrumbs -->



<nav class="breadcrumbs">
  <ol>
    
    <!--  -->
    
    <!--  -->
    
    <!--  -->
    
    <li>
      <a class="wrapper" href="/">
        <svg
  id="soreine-logo"
  viewBox="0 0 100 60"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    id="mask"
    d="M49.8 24.32C49.8 10.75 61 4.57 76.45 4.57C84.8574 4.57 96.52 2.03 100 0V21.96C100 38.3 86.58 43.98 75.29 43.98C64 43.98 55.49 50.02 49.8 60C49.84 44.32 49.8 33.53 49.8 24.32ZM85.69 36.39C88.37 32.25 89.69 28.35 88.72 23.48C87.57 18.03 83.69 13.64 78.5 11.91C76.74 11.3 75.74 11.2 73.7 11.2C67.15 11.71 61.83 15.13 59.47 20.81C57.87 25.35 58.05 29.63 59.87 33.5C61.31 36.34 63.55 38.63 66.11 40.14C70.48 35.04 82.46 35.55 85.67 36.43L85.69 36.39ZM14.51 36.33C14.01 35.72 13.08 34.2 12.74 33.53C10.88 29.75 10.61 25.16 12.04 21.26C13.62 16.93 17.03 13.49 21.26 11.95C24.13 10.91 27.29 10.75 30.22 11.44C35.54 12.78 39.81 17.03 41.29 22.43C42.66 27.42 41.35 33 37.91 36.9C36.75 38.21 34.5 39.99 34.03 39.96C29.42 35.25 19.48 34.95 14.53 36.3L14.51 36.33Z"
    fill="url(#gradient)"
  />
  <defs>
    <linearGradient
      id="gradient"
      x1="0"
      y1="0"
      x2="100"
      y2="0"
      gradientUnits="userSpaceOnUse"
    >
      <stop id="left-color" offset="0" stop-color="#000000" />
      <stop id="right-color" offset="1" stop-color="#000000" />
    </linearGradient>
  </defs>
</svg>

        <span>Home</span>
      </a>

      
      <!--  -->
      <span class="chevron">
  <svg
    version="1.1"
    id="Capa_1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    x="0px"
    y="0px"
    viewBox="0 0 512 512"
    style="enable-background: new 0 0 512 512;"
    xml:space="preserve"
  >
    <g>
      <g>
        <path
          d="M367.954,213.588L160.67,5.872c-7.804-7.819-20.467-7.831-28.284-0.029c-7.819,7.802-7.832,20.465-0.03,28.284
			l207.299,207.731c7.798,7.798,7.798,20.486-0.015,28.299L132.356,477.873c-7.802,7.819-7.789,20.482,0.03,28.284
			c3.903,3.896,9.016,5.843,14.127,5.843c5.125,0,10.25-1.958,14.157-5.873l207.269-207.701
			C391.333,275.032,391.333,236.967,367.954,213.588z"
        />
      </g>
    </g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
  </svg>
</span>

      <!--  -->
      
    </li>

    
    <!--  -->
    
    <!--  -->
    
    <!--  -->
    
    <li>
      <a class="wrapper" href="/writing/"
        ><span>Writing</span></a
      >

      
      <!--  -->
      <span class="chevron">
  <svg
    version="1.1"
    id="Capa_1"
    xmlns="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    x="0px"
    y="0px"
    viewBox="0 0 512 512"
    style="enable-background: new 0 0 512 512;"
    xml:space="preserve"
  >
    <g>
      <g>
        <path
          d="M367.954,213.588L160.67,5.872c-7.804-7.819-20.467-7.831-28.284-0.029c-7.819,7.802-7.832,20.465-0.03,28.284
			l207.299,207.731c7.798,7.798,7.798,20.486-0.015,28.299L132.356,477.873c-7.802,7.819-7.789,20.482,0.03,28.284
			c3.903,3.896,9.016,5.843,14.127,5.843c5.125,0,10.25-1.958,14.157-5.873l207.269-207.701
			C391.333,275.032,391.333,236.967,367.954,213.588z"
        />
      </g>
    </g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
    <g></g>
  </svg>
</span>

      <!--  -->
      
    </li>
    
    <!--  -->
    
    <!--  -->
    
    <!--  -->
    
    <!--  -->
    
  </ol>
</nav>


 <div class="post writing">
  
  <h1 class="post-title">The bias of real-world analogies</h1>
   <section>
  <p>Recently, I had to implement some functions to move items in an ordered collection, and I made it way more complicated than needed. My collections were ordered trees and I was moving subtrees around, but the problem is similar with simple lists, so we will talk about lists.</p>

  <p>Here is one of the functions I wanted to implement:</p>

  <div class="language-elm highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">move</span><span class="p">(</span><span class="n">collection</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="kt">Returns</span> <span class="n">a</span> <span class="n">new</span> <span class="n">collection</span> <span class="n">where</span> <span class="n">the</span> <span class="n">item</span> <span class="n">at</span> <span class="n">index</span> <span class="n">i</span> <span class="n">is</span> <span class="n">now</span> <span class="n">at</span> <span class="n">index</span> <span class="n">j</span>
</code></pre></div>  </div>

  <p>Let’s assume we already have two basic functions at our disposal:</p>

  <ul>
    <li><code class="highlighter-rouge">insert(collection, i, item)</code> that returns a new collection where <code class="highlighter-rouge">item</code> was added at index <code class="highlighter-rouge">i</code></li>
    <li><code class="highlighter-rouge">remove(collection, i)</code> that returns a new collection without the item that was at index <code class="highlighter-rouge">i</code></li>
  </ul>

  <p>Moving an item in a collection is essentially taking it from an index, and inserting it at another . So the function <code class="highlighter-rouge">move</code> is some simple composition of our two basic functions, <code class="highlighter-rouge">remove</code> then <code class="highlighter-rouge">insert</code>. The only pitfall is that removing or inserting shifts some items in the collection, so we need to be careful because we might end up inserting our item back to the wrong index.</p>

  <p>For lists, it is simple to determine if we need to insert back at <code class="highlighter-rouge">i</code> or <code class="highlighter-rouge">i - 1</code>. In my case, it was a bit more complicated. In my ordered trees, the indexes were a sequences of indexes (or paths) in the tree:</p>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── 0
│   ├── 0.0
│   └── 0.1
└── 1
    ├── 1.0
    └── 1.1
</code></pre></div>  </div>

  <p>Determining the impact on indexes when removing a subtree was a bit trickier than lists. A few bugs later, and I had written the code to handle that, and could implement the <code class="highlighter-rouge">move</code> function. Add on top of that that I wanted <code class="highlighter-rouge">move(collection, i, i)</code> to be a no-op, and I was gone full paranoid, looking everywhere after edge cases.</p>

</section>
<section>

  <p><em>Actually, all this can be a lot simpler.</em></p>

</section>
<section>

  <p>I realised that <strong>I was biased by concepts of our physical world</strong>. I was inclined to believe that an item needs to be taken from somewhere first, to be put somewhere else after. But inside the Matrix, you’re free to do it in any order. Using real-world analogies is helpful to the mind, but it can be deceiving too.</p>

  <p>Instead of trying to calculate the new indexes all the time, we just need to know whether removing first or inserting first will not mess up the indexes. Because doing some operation at index <code class="highlighter-rouge">i</code> will only impact <code class="highlighter-rouge">j</code> if <code class="highlighter-rouge">i &lt; j</code>. For trees, we can compare indexes using the alphabetical order.</p>

  <p>Our <code class="highlighter-rouge">move</code> function ends up looking like this:</p>

  <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">function</span> <span class="n">move</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">insert</span> <span class="n">at</span> <span class="n">j</span>
        <span class="n">remove</span> <span class="n">i</span>
    <span class="k">else</span>
        <span class="n">remove</span> <span class="n">i</span>
        <span class="n">insert</span> <span class="n">at</span> <span class="n">j</span>
</code></pre></div>  </div>

</section>
<section>

  <p>Now free your mind. You will be a happier person. Just like Morpheus.</p>

  <p><img src="/images/writing/morpheus.jpg" /></p>

</section>

</div>

    </article>
  </body>
</html>
